# Maintainer: Joni Lapilainen <joni.lapilainen@gmail.com>

_gitroot="git://omxil.git.sourceforge.net/gitroot/omxil/omxil"
_gitname="omxil"

pkgname=libomxil-bellagio-git
pkgver=r708.f2c7fd9
pkgrel=1
pkgdesc="An opensource implementation of the OpenMAX Integration Layer API"
arch=('arm' 'armv7h' 'i686' 'x86_64')
url="http://omxil.sourceforge.net"
license="LGPL"
makedepends=('doxygen' 'git')
provides=('libomxil-bellagio')
source=($_gitroot)
sha256sums=('SKIP')

pkgver() {
  cd "$srcdir/$_gitname"
  printf "r%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"
}

build() {
  cd "$srcdir/$_gitname"

  autoreconf -i -f
  sed -i 's/ -Werror//g' configure
  ./configure --prefix=/usr

  make -j1
}

package() {
  cd "$srcdir/$_gitname"

  make DESTDIR="$pkgdir" install
}

